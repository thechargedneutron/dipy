<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dipy &#8212; dipy 0.13.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="keywords" content="dipy, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="dipy logo"  border="0" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">API Reference</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">


<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../devel/index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.org/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.org/software/projects/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.org/nipy/license.html">License</a></li>
  </ul>


  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">external</span></code></a><ul>
<li><a class="reference internal" href="#module-dipy.external.fsl">Module: <code class="docutils literal"><span class="pre">external.fsl</span></code></a><ul>
<li><a class="reference internal" href="#test">test</a></li>
<li><a class="reference internal" href="#dpy"><code class="docutils literal"><span class="pre">Dpy</span></code></a></li>
<li><a class="reference internal" href="#fslerror"><code class="docutils literal"><span class="pre">FSLError</span></code></a><ul>
</ul>
</li>
<li><a class="reference internal" href="#intemporarydirectory"><code class="docutils literal"><span class="pre">InTemporaryDirectory</span></code></a></li>
<li><a class="reference internal" href="#popen"><code class="docutils literal"><span class="pre">Popen</span></code></a></li>
<li><a class="reference internal" href="#affine-transform">affine_transform</a></li>
<li><a class="reference internal" href="#apply-warp">apply_warp</a></li>
<li><a class="reference internal" href="#bet">bet</a></li>
<li><a class="reference internal" href="#create-displacements">create_displacements</a></li>
<li><a class="reference internal" href="#dcm2nii">dcm2nii</a></li>
<li><a class="reference internal" href="#eddy-correct">eddy_correct</a></li>
<li><a class="reference internal" href="#flirt2aff">flirt2aff</a></li>
<li><a class="reference internal" href="#flirt2aff-files">flirt2aff_files</a></li>
<li><a class="reference internal" href="#have-flirt">have_flirt</a></li>
<li><a class="reference internal" href="#mc">mc</a></li>
<li><a class="reference internal" href="#pipe">pipe</a></li>
<li><a class="reference internal" href="#pjoin">pjoin</a></li>
<li><a class="reference internal" href="#run-flirt-imgs">run_flirt_imgs</a></li>
<li><a class="reference internal" href="#warp-displacements">warp_displacements</a></li>
<li><a class="reference internal" href="#warp-displacements-tracks">warp_displacements_tracks</a></li>
<li><a class="reference internal" href="#write-bvals-bvecs">write_bvals_bvecs</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/dipy.external.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox-ml" style="display: none">
  <h3>Search mailing list archive</h3>
  <script type="text/javascript">
    function mlsearch(curobj)
    {
    curobj.q.value="site:mail.python.org/pipermail/neuroimaging/ "+curobj.userquery.value
    }
  </script>
  <form action="http://www.google.com/search" method="get" onSubmit="mlsearch(this)">
    <input name="userquery" size="13" type="text" /> <input type="submit" value="Go" />
    <input name="q" type="hidden" />
  </form>
</div>

<div id="searchbox-site" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="13" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


<script>
     ((window.gitter = {}).chat = {}).options = {
       room: 'nipy/dipy'
     };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-dipy.external">
<span id="external"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">external</span></code><a class="headerlink" href="#module-dipy.external" title="Permalink to this headline">¶</a></h1>
<p>Calls to external packages</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.test" title="dipy.external.test"><code class="xref py py-obj docutils literal"><span class="pre">test</span></code></a></td>
<td>Run tests for module using nose.</td>
</tr>
</tbody>
</table>
<div class="section" id="module-dipy.external.fsl">
<span id="module-external-fsl"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">external.fsl</span></code><a class="headerlink" href="#module-dipy.external.fsl" title="Permalink to this headline">¶</a></h2>
<p>FSL IO</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Dpy" title="dipy.external.fsl.Dpy"><code class="xref py py-obj docutils literal"><span class="pre">Dpy</span></code></a>(fname[,&nbsp;mode,&nbsp;compression])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.FSLError" title="dipy.external.fsl.FSLError"><code class="xref py py-obj docutils literal"><span class="pre">FSLError</span></code></a></td>
<td>Class signals error in FSL processing</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.InTemporaryDirectory" title="dipy.external.fsl.InTemporaryDirectory"><code class="xref py py-obj docutils literal"><span class="pre">InTemporaryDirectory</span></code></a>([suffix,&nbsp;prefix,&nbsp;dir])</td>
<td>Create, return, and change directory to a temporary directory</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.Popen" title="dipy.external.fsl.Popen"><code class="xref py py-obj docutils literal"><span class="pre">Popen</span></code></a>(args[,&nbsp;bufsize,&nbsp;executable,&nbsp;stdin,&nbsp;...])</td>
<td>Execute a child program in a new process.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.affine_transform" title="dipy.external.fsl.affine_transform"><code class="xref py py-obj docutils literal"><span class="pre">affine_transform</span></code></a>(input,&nbsp;matrix[,&nbsp;offset,&nbsp;...])</td>
<td>Apply an affine transformation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.apply_warp" title="dipy.external.fsl.apply_warp"><code class="xref py py-obj docutils literal"><span class="pre">apply_warp</span></code></a>(in_nii,&nbsp;affine_mat,&nbsp;nonlin_nii,&nbsp;...)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.bet" title="dipy.external.fsl.bet"><code class="xref py py-obj docutils literal"><span class="pre">bet</span></code></a>(in_nii,&nbsp;out_nii[,&nbsp;options])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.create_displacements" title="dipy.external.fsl.create_displacements"><code class="xref py py-obj docutils literal"><span class="pre">create_displacements</span></code></a>(fin,&nbsp;fmat,&nbsp;fnonlin,&nbsp;...)</td>
<td>Create displacements using FSL&#8217;s FLIRT and FNIRT tools</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.dcm2nii" title="dipy.external.fsl.dcm2nii"><code class="xref py py-obj docutils literal"><span class="pre">dcm2nii</span></code></a>(dname,&nbsp;outdir[,&nbsp;filt,&nbsp;options])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.eddy_correct" title="dipy.external.fsl.eddy_correct"><code class="xref py py-obj docutils literal"><span class="pre">eddy_correct</span></code></a>(in_nii,&nbsp;out_nii[,&nbsp;ref])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.flirt2aff" title="dipy.external.fsl.flirt2aff"><code class="xref py py-obj docutils literal"><span class="pre">flirt2aff</span></code></a>(mat,&nbsp;in_img,&nbsp;ref_img)</td>
<td>Transform from <cite>in_img</cite> voxels to <cite>ref_img</cite> voxels given <cite>mat</cite></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.flirt2aff_files" title="dipy.external.fsl.flirt2aff_files"><code class="xref py py-obj docutils literal"><span class="pre">flirt2aff_files</span></code></a>(matfile,&nbsp;in_fname,&nbsp;ref_fname)</td>
<td>Map from <cite>in_fname</cite> image voxels to <cite>ref_fname</cite> voxels given <cite>matfile</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.have_flirt" title="dipy.external.fsl.have_flirt"><code class="xref py py-obj docutils literal"><span class="pre">have_flirt</span></code></a>()</td>
<td>Return True if we can call flirt without error</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.mc" title="dipy.external.fsl.mc"><code class="xref py py-obj docutils literal"><span class="pre">mc</span></code></a>(input,&nbsp;coordinates[,&nbsp;output,&nbsp;order,&nbsp;...])</td>
<td>Map the input array to new coordinates by interpolation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.pipe" title="dipy.external.fsl.pipe"><code class="xref py py-obj docutils literal"><span class="pre">pipe</span></code></a>(cmd[,&nbsp;print_sto,&nbsp;print_ste])</td>
<td>A tine pipeline system to run external tools.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.pjoin" title="dipy.external.fsl.pjoin"><code class="xref py py-obj docutils literal"><span class="pre">pjoin</span></code></a>(a,&nbsp;*p)</td>
<td>Join two or more pathname components, inserting &#8216;/&#8217; as needed.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.run_flirt_imgs" title="dipy.external.fsl.run_flirt_imgs"><code class="xref py py-obj docutils literal"><span class="pre">run_flirt_imgs</span></code></a>(in_img,&nbsp;ref_img[,&nbsp;dof,&nbsp;flags])</td>
<td>Run flirt on nibabel images, returning affine</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.warp_displacements" title="dipy.external.fsl.warp_displacements"><code class="xref py py-obj docutils literal"><span class="pre">warp_displacements</span></code></a>(ffa,&nbsp;flaff,&nbsp;fdis,&nbsp;fref,&nbsp;ffaw)</td>
<td>Warp an image using fsl displacements</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.warp_displacements_tracks" title="dipy.external.fsl.warp_displacements_tracks"><code class="xref py py-obj docutils literal"><span class="pre">warp_displacements_tracks</span></code></a>(fdpy,&nbsp;ffa,&nbsp;fmat,&nbsp;...)</td>
<td>Warp tracks from native space to the FMRIB58/MNI space</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.write_bvals_bvecs" title="dipy.external.fsl.write_bvals_bvecs"><code class="xref py py-obj docutils literal"><span class="pre">write_bvals_bvecs</span></code></a>(bvals,&nbsp;bvecs[,&nbsp;outpath,&nbsp;...])</td>
<td>Write FSL FDT bvals and bvecs files</td>
</tr>
</tbody>
</table>
<div class="section" id="test">
<h3>test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.test">
<code class="descclassname">dipy.external.</code><code class="descname">test</code><span class="sig-paren">(</span><em>self</em>, <em>label='fast'</em>, <em>verbose=1</em>, <em>extra_argv=None</em>, <em>doctests=False</em>, <em>coverage=False</em>, <em>raise_warnings=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run tests for module using nose.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>label</strong> : {&#8216;fast&#8217;, &#8216;full&#8217;, &#8216;&#8217;, attribute identifier}, optional</p>
<blockquote>
<div><p>Identifies the tests to run. This can be a string to pass to
the nosetests executable with the &#8216;-A&#8217; option, or one of several
special values.  Special values are:
* &#8216;fast&#8217; - the default - which corresponds to the <code class="docutils literal"><span class="pre">nosetests</span> <span class="pre">-A</span></code></p>
<blockquote>
<div><p>option of &#8216;not slow&#8217;.</p>
</div></blockquote>
<ul class="simple">
<li>&#8216;full&#8217; - fast (as above) and slow tests as in the
&#8216;no -A&#8217; option to nosetests - this is the same as &#8216;&#8217;.</li>
<li>None or &#8216;&#8217; - run all tests.</li>
</ul>
<p>attribute_identifier - string passed directly to nosetests as &#8216;-A&#8217;.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity value for test outputs, in the range 1-10. Default is 1.</p>
</div></blockquote>
<p><strong>extra_argv</strong> : list, optional</p>
<blockquote>
<div><p>List with any extra arguments to pass to nosetests.</p>
</div></blockquote>
<p><strong>doctests</strong> : bool, optional</p>
<blockquote>
<div><p>If True, run doctests in module. Default is False.</p>
</div></blockquote>
<p><strong>coverage</strong> : bool, optional</p>
<blockquote>
<div><p>If True, report coverage of NumPy code. Default is False.
(This requires the <a href="#id1"><span class="problematic" id="id2">`</span></a>coverage module:</p>
<blockquote>
<div><p>&lt;<a class="reference external" href="http://nedbatchelder.com/code/modules/coverage.html">http://nedbatchelder.com/code/modules/coverage.html</a>&gt;`_).</p>
</div></blockquote>
</div></blockquote>
<p><strong>raise_warnings</strong> : None, str or sequence of warnings, optional</p>
<blockquote>
<div><p>This specifies which warnings to configure as &#8216;raise&#8217; instead
of being shown once during the test execution.  Valid strings are:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;develop&#8221; : equals <code class="docutils literal"><span class="pre">(Warning,)</span></code></li>
<li>&#8220;release&#8221; : equals <code class="docutils literal"><span class="pre">()</span></code>, don&#8217;t raise on any warnings.</li>
</ul>
</div></blockquote>
<p>The default is to use the class initialization value.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> : object</p>
<blockquote class="last">
<div><p>Returns the result of running the tests as a
<code class="docutils literal"><span class="pre">nose.result.TextTestResult</span></code> object.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Each NumPy module exposes <cite>test</cite> in its namespace to run all tests for it.
For example, to run all tests for numpy.lib:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
<span class="go">Running unit tests for numpy.lib</span>
<span class="gp">...</span>
<span class="go">Ran 976 tests in 3.933s</span>
</pre></div>
</div>
<p>OK</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">errors</span> 
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">knownfail</span> 
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="dpy">
<h3><a class="reference internal" href="#dipy.external.fsl.Dpy" title="dipy.external.fsl.Dpy"><code class="xref py py-class docutils literal"><span class="pre">Dpy</span></code></a><a class="headerlink" href="#dpy" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.external.fsl.Dpy">
<em class="property">class </em><code class="descclassname">dipy.external.fsl.</code><code class="descname">Dpy</code><span class="sig-paren">(</span><em>fname</em>, <em>mode='r'</em>, <em>compression=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Dpy.close" title="dipy.external.fsl.Dpy.close"><code class="xref py py-obj docutils literal"><span class="pre">close</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.Dpy.read_track" title="dipy.external.fsl.Dpy.read_track"><code class="xref py py-obj docutils literal"><span class="pre">read_track</span></code></a>()</td>
<td>read one track each time</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Dpy.read_tracks" title="dipy.external.fsl.Dpy.read_tracks"><code class="xref py py-obj docutils literal"><span class="pre">read_tracks</span></code></a>()</td>
<td>read the entire tractography</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.Dpy.read_tracksi" title="dipy.external.fsl.Dpy.read_tracksi"><code class="xref py py-obj docutils literal"><span class="pre">read_tracksi</span></code></a>(indices)</td>
<td>read tracks with specific indices</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Dpy.version" title="dipy.external.fsl.Dpy.version"><code class="xref py py-obj docutils literal"><span class="pre">version</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.Dpy.write_track" title="dipy.external.fsl.Dpy.write_track"><code class="xref py py-obj docutils literal"><span class="pre">write_track</span></code></a>(track)</td>
<td>write on track each time</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Dpy.write_tracks" title="dipy.external.fsl.Dpy.write_tracks"><code class="xref py py-obj docutils literal"><span class="pre">write_tracks</span></code></a>(tracks)</td>
<td>write many tracks together</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.external.fsl.Dpy.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>fname</em>, <em>mode='r'</em>, <em>compression=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Advanced storage system for tractography based on HDF5</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fname</strong> : str, full filename</p>
<p><strong>mode</strong> : &#8216;r&#8217; read</p>
<blockquote>
<div><p>&#8216;w&#8217; write
&#8216;r+&#8217; read and write only if file already exists</p>
</div></blockquote>
<p class="last"><strong>compression</strong> : 0 no compression to 9 maximum compression</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tempfile</span> <span class="k">import</span> <span class="n">mkstemp</span> <span class="c1">#temp file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.io.dpy</span> <span class="k">import</span> <span class="n">Dpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">dpy_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">fd</span><span class="p">,</span><span class="n">fname</span> <span class="o">=</span> <span class="n">mkstemp</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">fname</span> <span class="o">+=</span> <span class="s1">&#39;.dpy&#39;</span><span class="c1">#add correct extension</span>
<span class="gp">... </span>    <span class="n">dpw</span> <span class="o">=</span> <span class="n">Dpy</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">A</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">B</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">A</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">C</span><span class="o">=</span><span class="mi">3</span><span class="o">*</span><span class="n">A</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">dpw</span><span class="o">.</span><span class="n">write_track</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">dpw</span><span class="o">.</span><span class="n">write_track</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">dpw</span><span class="o">.</span><span class="n">write_track</span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">dpw</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">dpr</span> <span class="o">=</span> <span class="n">Dpy</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">A</span><span class="o">=</span><span class="n">dpr</span><span class="o">.</span><span class="n">read_track</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">B</span><span class="o">=</span><span class="n">dpr</span><span class="o">.</span><span class="n">read_track</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">T</span><span class="o">=</span><span class="n">dpr</span><span class="o">.</span><span class="n">read_tracksi</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">dpr</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="c1">#delete file from disk</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dpy_example</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Dpy.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Dpy.read_track">
<code class="descname">read_track</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.read_track" title="Permalink to this definition">¶</a></dt>
<dd><p>read one track each time</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Dpy.read_tracks">
<code class="descname">read_tracks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.read_tracks" title="Permalink to this definition">¶</a></dt>
<dd><p>read the entire tractography</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Dpy.read_tracksi">
<code class="descname">read_tracksi</code><span class="sig-paren">(</span><em>indices</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.read_tracksi" title="Permalink to this definition">¶</a></dt>
<dd><p>read tracks with specific indices</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Dpy.version">
<code class="descname">version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Dpy.write_track">
<code class="descname">write_track</code><span class="sig-paren">(</span><em>track</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.write_track" title="Permalink to this definition">¶</a></dt>
<dd><p>write on track each time</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Dpy.write_tracks">
<code class="descname">write_tracks</code><span class="sig-paren">(</span><em>tracks</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Dpy.write_tracks" title="Permalink to this definition">¶</a></dt>
<dd><p>write many tracks together</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="fslerror">
<h3><a class="reference internal" href="#dipy.external.fsl.FSLError" title="dipy.external.fsl.FSLError"><code class="xref py py-class docutils literal"><span class="pre">FSLError</span></code></a><a class="headerlink" href="#fslerror" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.external.fsl.FSLError">
<em class="property">class </em><code class="descclassname">dipy.external.fsl.</code><code class="descname">FSLError</code><a class="headerlink" href="#dipy.external.fsl.FSLError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></p>
<p>Class signals error in FSL processing</p>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">args</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">with_traceback</span></code></td>
<td>Exception.with_traceback(tb) &#8211; set self.__traceback__ to tb and return self.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.external.fsl.FSLError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.FSLError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="intemporarydirectory">
<h3><a class="reference internal" href="#dipy.external.fsl.InTemporaryDirectory" title="dipy.external.fsl.InTemporaryDirectory"><code class="xref py py-class docutils literal"><span class="pre">InTemporaryDirectory</span></code></a><a class="headerlink" href="#intemporarydirectory" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.external.fsl.InTemporaryDirectory">
<em class="property">class </em><code class="descclassname">dipy.external.fsl.</code><code class="descname">InTemporaryDirectory</code><span class="sig-paren">(</span><em>suffix=''</em>, <em>prefix='tmp'</em>, <em>dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.InTemporaryDirectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">nibabel.tmpdirs.TemporaryDirectory</span></code></p>
<p>Create, return, and change directory to a temporary directory</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">InTemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">_</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;wt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;some text&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;test.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">==</span> <span class="n">my_cwd</span>
<span class="go">True</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cleanup</span></code>()</td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.external.fsl.InTemporaryDirectory.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>suffix=''</em>, <em>prefix='tmp'</em>, <em>dir=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.InTemporaryDirectory.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="popen">
<h3><a class="reference internal" href="#dipy.external.fsl.Popen" title="dipy.external.fsl.Popen"><code class="xref py py-class docutils literal"><span class="pre">Popen</span></code></a><a class="headerlink" href="#popen" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.external.fsl.Popen">
<em class="property">class </em><code class="descclassname">dipy.external.fsl.</code><code class="descname">Popen</code><span class="sig-paren">(</span><em>args</em>, <em>bufsize=-1</em>, <em>executable=None</em>, <em>stdin=None</em>, <em>stdout=None</em>, <em>stderr=None</em>, <em>preexec_fn=None</em>, <em>close_fds=&lt;object object&gt;</em>, <em>shell=False</em>, <em>cwd=None</em>, <em>env=None</em>, <em>universal_newlines=False</em>, <em>startupinfo=None</em>, <em>creationflags=0</em>, <em>restore_signals=True</em>, <em>start_new_session=False</em>, <em>pass_fds=()</em>, <em>*</em>, <em>encoding=None</em>, <em>errors=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Execute a child program in a new process.</p>
<p>For a complete description of the arguments see the Python documentation.</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd><p class="first">args: A string, or a sequence of program arguments.</p>
<dl class="docutils">
<dt>bufsize: supplied as the buffering argument to the open() function when</dt>
<dd>creating the stdin/stdout/stderr pipe file objects</dd>
</dl>
<p>executable: A replacement program to execute.</p>
<dl class="docutils">
<dt>stdin, stdout and stderr: These specify the executed programs&#8217; standard</dt>
<dd>input, standard output and standard error file handles, respectively.</dd>
<dt>preexec_fn: (POSIX only) An object to be called in the child process</dt>
<dd>just before the child is executed.</dd>
</dl>
<p>close_fds: Controls closing or inheriting of file descriptors.</p>
<p>shell: If true, the command will be executed through the shell.</p>
<p>cwd: Sets the current directory before the child is executed.</p>
<p>env: Defines the environment variables for the new process.</p>
<dl class="docutils">
<dt>universal_newlines: If true, use universal line endings for file</dt>
<dd>objects stdin, stdout and stderr.</dd>
</dl>
<p>startupinfo and creationflags (Windows only)</p>
<p>restore_signals (POSIX only)</p>
<p>start_new_session (POSIX only)</p>
<p>pass_fds (POSIX only)</p>
<dl class="last docutils">
<dt>encoding and errors: Text mode encoding and error handling to use for</dt>
<dd>file objects stdin, stdout and stderr.</dd>
</dl>
</dd>
<dt>Attributes:</dt>
<dd>stdin, stdout, stderr, pid, returncode</dd>
</dl>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Popen.communicate" title="dipy.external.fsl.Popen.communicate"><code class="xref py py-obj docutils literal"><span class="pre">communicate</span></code></a>([input,&nbsp;timeout])</td>
<td>Interact with process: Send data to stdin.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.Popen.kill" title="dipy.external.fsl.Popen.kill"><code class="xref py py-obj docutils literal"><span class="pre">kill</span></code></a>()</td>
<td>Kill the process with SIGKILL</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Popen.poll" title="dipy.external.fsl.Popen.poll"><code class="xref py py-obj docutils literal"><span class="pre">poll</span></code></a>()</td>
<td>Check if child process has terminated.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.Popen.send_signal" title="dipy.external.fsl.Popen.send_signal"><code class="xref py py-obj docutils literal"><span class="pre">send_signal</span></code></a>(sig)</td>
<td>Send a signal to the process.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.external.fsl.Popen.terminate" title="dipy.external.fsl.Popen.terminate"><code class="xref py py-obj docutils literal"><span class="pre">terminate</span></code></a>()</td>
<td>Terminate the process with SIGTERM</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.external.fsl.Popen.wait" title="dipy.external.fsl.Popen.wait"><code class="xref py py-obj docutils literal"><span class="pre">wait</span></code></a>([timeout,&nbsp;endtime])</td>
<td>Wait for child process to terminate.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.external.fsl.Popen.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>args</em>, <em>bufsize=-1</em>, <em>executable=None</em>, <em>stdin=None</em>, <em>stdout=None</em>, <em>stderr=None</em>, <em>preexec_fn=None</em>, <em>close_fds=&lt;object object&gt;</em>, <em>shell=False</em>, <em>cwd=None</em>, <em>env=None</em>, <em>universal_newlines=False</em>, <em>startupinfo=None</em>, <em>creationflags=0</em>, <em>restore_signals=True</em>, <em>start_new_session=False</em>, <em>pass_fds=()</em>, <em>*</em>, <em>encoding=None</em>, <em>errors=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new Popen instance.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Popen.communicate">
<code class="descname">communicate</code><span class="sig-paren">(</span><em>input=None</em>, <em>timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen.communicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Interact with process: Send data to stdin.  Read data from
stdout and stderr, until end-of-file is reached.  Wait for
process to terminate.</p>
<p>The optional &#8220;input&#8221; argument should be data to be sent to the
child process (if self.universal_newlines is True, this should
be a string; if it is False, &#8220;input&#8221; should be bytes), or
None, if no data should be sent to the child.</p>
<p>communicate() returns a tuple (stdout, stderr).  These will be
bytes or, if self.universal_newlines was True, a string.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Popen.kill">
<code class="descname">kill</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Kill the process with SIGKILL</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Popen.poll">
<code class="descname">poll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen.poll" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if child process has terminated. Set and return returncode
attribute.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Popen.send_signal">
<code class="descname">send_signal</code><span class="sig-paren">(</span><em>sig</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen.send_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a signal to the process.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Popen.terminate">
<code class="descname">terminate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen.terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate the process with SIGTERM</p>
</dd></dl>

<dl class="method">
<dt id="dipy.external.fsl.Popen.wait">
<code class="descname">wait</code><span class="sig-paren">(</span><em>timeout=None</em>, <em>endtime=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.Popen.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for child process to terminate.  Returns returncode
attribute.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="affine-transform">
<h3>affine_transform<a class="headerlink" href="#affine-transform" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.affine_transform">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">affine_transform</code><span class="sig-paren">(</span><em>input</em>, <em>matrix</em>, <em>offset=0.0</em>, <em>output_shape=None</em>, <em>output=None</em>, <em>order=3</em>, <em>mode='constant'</em>, <em>cval=0.0</em>, <em>prefilter=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.affine_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an affine transformation.</p>
<p>The given matrix and offset are used to find for each point in the
output the corresponding coordinates in the input by an affine
transformation. The value of the input at those coordinates is
determined by spline interpolation of the requested order. Points
outside the boundaries of the input are filled according to the given
mode.</p>
<p>Given an output image pixel index vector <code class="docutils literal"><span class="pre">o</span></code>, the pixel value
is determined from the input image at position <code class="docutils literal"><span class="pre">np.dot(matrix,o)</span> <span class="pre">+</span> <span class="pre">offset</span></code>.</p>
<p>A diagonal matrix can be specified by supplying a one-dimensional
array-like to the matrix parameter, in which case a more efficient
algorithm is applied.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.18.0: </span>Previously, the exact interpretation of the affine transformation
depended on whether the matrix was supplied as a one-dimensional or
two-dimensional array. If a one-dimensional array was supplied
to the matrix parameter, the output pixel value at index <code class="docutils literal"><span class="pre">o</span></code>
was determined from the input image at position <code class="docutils literal"><span class="pre">matrix</span> <span class="pre">*</span> <span class="pre">(o</span> <span class="pre">+</span> <span class="pre">offset)</span></code>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input</strong> : ndarray</p>
<blockquote>
<div><p>The input array.</p>
</div></blockquote>
<p><strong>matrix</strong> : ndarray</p>
<blockquote>
<div><p>The matrix must be two-dimensional or can also be given as a
one-dimensional sequence or array. In the latter case, it is assumed
that the matrix is diagonal. A more efficient algorithms is then
applied that exploits the separability of the problem.</p>
</div></blockquote>
<p><strong>offset</strong> : float or sequence, optional</p>
<blockquote>
<div><p>The offset into the array where the transform is applied. If a float,
<cite>offset</cite> is the same for each axis. If a sequence, <cite>offset</cite> should
contain one value for each axis.</p>
</div></blockquote>
<p><strong>output_shape</strong> : tuple of ints, optional</p>
<blockquote>
<div><p>Shape tuple.</p>
</div></blockquote>
<p><strong>output</strong> : ndarray or dtype, optional</p>
<blockquote>
<div><p>The array in which to place the output, or the dtype of the returned
array.</p>
</div></blockquote>
<p><strong>order</strong> : int, optional</p>
<blockquote>
<div><p>The order of the spline interpolation, default is 3.
The order has to be in the range 0-5.</p>
</div></blockquote>
<p><strong>mode</strong> : str, optional</p>
<blockquote>
<div><p>Points outside the boundaries of the input are filled according
to the given mode (&#8216;constant&#8217;, &#8216;nearest&#8217;, &#8216;reflect&#8217;, &#8216;mirror&#8217; or &#8216;wrap&#8217;).
Default is &#8216;constant&#8217;.</p>
</div></blockquote>
<p><strong>cval</strong> : scalar, optional</p>
<blockquote>
<div><p>Value used for points outside the boundaries of the input if
<code class="docutils literal"><span class="pre">mode='constant'</span></code>. Default is 0.0</p>
</div></blockquote>
<p><strong>prefilter</strong> : bool, optional</p>
<blockquote>
<div><p>The parameter prefilter determines if the input is pre-filtered with
<cite>spline_filter</cite> before interpolation (necessary for spline
interpolation of order &gt; 1).  If False, it is assumed that the input is
already filtered. Default is True.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>affine_transform</strong> : ndarray or None</p>
<blockquote class="last">
<div><p>The transformed input. If <cite>output</cite> is given as a parameter, None is
returned.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="apply-warp">
<h3>apply_warp<a class="headerlink" href="#apply-warp" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.apply_warp">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">apply_warp</code><span class="sig-paren">(</span><em>in_nii</em>, <em>affine_mat</em>, <em>nonlin_nii</em>, <em>out_nii</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.apply_warp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="bet">
<h3>bet<a class="headerlink" href="#bet" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.bet">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">bet</code><span class="sig-paren">(</span><em>in_nii</em>, <em>out_nii</em>, <em>options=' -F -f .2 -g 0'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.bet" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="create-displacements">
<h3>create_displacements<a class="headerlink" href="#create-displacements" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.create_displacements">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">create_displacements</code><span class="sig-paren">(</span><em>fin</em>, <em>fmat</em>, <em>fnonlin</em>, <em>finvw</em>, <em>fdisp</em>, <em>fdispa</em>, <em>fref</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.create_displacements" title="Permalink to this definition">¶</a></dt>
<dd><p>Create displacements using FSL&#8217;s FLIRT and FNIRT tools</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fin</strong> : filename of initial source image</p>
<p><strong>fmat</strong> : filename of .mat  (flirt)</p>
<p><strong>fnonlin</strong> :  filename of fnirt output</p>
<p><strong>finvw</strong> : filename of invwarp displacements (invwarp)</p>
<p><strong>fdis</strong> : filename of fnirtfileutils</p>
<p><strong>fdisa</strong> :  filename of fnirtfileutils (with other parameters)</p>
<p class="last"><strong>fref</strong> : filename of reference image e.g. (FMRIB58_FA_1mm.nii.gz)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="dcm2nii">
<h3>dcm2nii<a class="headerlink" href="#dcm2nii" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.dcm2nii">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">dcm2nii</code><span class="sig-paren">(</span><em>dname</em>, <em>outdir</em>, <em>filt='*.dcm'</em>, <em>options='-d n -g n -i n -o'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.dcm2nii" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="eddy-correct">
<h3>eddy_correct<a class="headerlink" href="#eddy-correct" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.eddy_correct">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">eddy_correct</code><span class="sig-paren">(</span><em>in_nii</em>, <em>out_nii</em>, <em>ref=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.eddy_correct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="flirt2aff">
<h3>flirt2aff<a class="headerlink" href="#flirt2aff" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.flirt2aff">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">flirt2aff</code><span class="sig-paren">(</span><em>mat</em>, <em>in_img</em>, <em>ref_img</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.flirt2aff" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform from <cite>in_img</cite> voxels to <cite>ref_img</cite> voxels given <cite>mat</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mat</strong> : (4,4) array</p>
<blockquote>
<div><p>contents (as array) of output <code class="docutils literal"><span class="pre">-omat</span></code> transformation file from flirt</p>
</div></blockquote>
<p><strong>in_img</strong> : img</p>
<blockquote>
<div><p>image passed (as filename) to flirt as <code class="docutils literal"><span class="pre">-in</span></code> image</p>
</div></blockquote>
<p><strong>ref_img</strong> : img</p>
<blockquote>
<div><p>image passed (as filename) to flirt as <code class="docutils literal"><span class="pre">-ref</span></code> image</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>aff</strong> : (4,4) array</p>
<blockquote class="last">
<div><p>Transform from voxel coordinates in <code class="docutils literal"><span class="pre">in_img</span></code> to voxel coordinates in
<code class="docutils literal"><span class="pre">ref_img</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Thanks to Mark Jenkinson and Jesper Andersson for the correct statements
here, apologies for any errors we&#8217;ve added.</p>
<p><code class="docutils literal"><span class="pre">flirt</span></code> registers an <code class="docutils literal"><span class="pre">in</span></code> image to a <code class="docutils literal"><span class="pre">ref</span></code> image.  It can produce
(with the <code class="docutils literal"><span class="pre">-omat</span></code> option) - a 4 x 4 affine matrix giving the mapping from
<em>inspace</em> to <em>refspace</em>.</p>
<p>The rest of this note is to specify what <em>inspace</em> and <em>refspace</em> are.</p>
<p>In what follows, a <em>voxtrans</em> for an image is the 4 by 4 affine
<code class="docutils literal"><span class="pre">np.diag([vox_i,</span> <span class="pre">vox_j,</span> <span class="pre">vox_k,</span> <span class="pre">1])</span></code> where <code class="docutils literal"><span class="pre">vox_i</span></code> etc are the voxel
sizes for the first second and third voxel dimension.  <code class="docutils literal"><span class="pre">vox_i</span></code> etc are
always positive.</p>
<p>If the input image has an affine with a negative determinant, then the
mapping from voxel coordinates in the input image to <em>inspace</em> is simply
<em>voxtrans</em> for the input image.  If the reference image has a negative
determinant, the mapping from voxel space in the reference image to
<em>refspace</em> is simply <em>voxtrans</em> for the reference image.</p>
<p>A negative determinant for the image affine is the common case, of an image
with a x voxel flip.  Analyze images don&#8217;t store affines and flirt assumes
a negative determinant in these cases.</p>
<p>For positive determinant affines, flirt starts <em>inspace</em> and / or
<em>refspace</em> with an x voxel flip.  The mapping implied for an x voxel flip
for image with shape (N_i, N_j, N_k) is:</p>
<blockquote>
<div><dl class="docutils">
<dt>[[-1, 0, 0, N_i - 1],</dt>
<dd>[ 0, 1, 0,       0],
[ 0, 0, 1,       0],
[ 0, 0, 0,       1]]</dd>
</dl>
</div></blockquote>
<p>If the input image has an affine with a positive determinant, then mapping
from input image voxel coordinates to <em>inspace</em> is <code class="docutils literal"><span class="pre">np.dot(input_voxtrans,</span>
<span class="pre">input_x_flip)</span></code> - where <code class="docutils literal"><span class="pre">input_x_flip</span></code> is the matrix above with <code class="docutils literal"><span class="pre">N_i</span></code>
given by the input image first axis length.  Similarly the mapping from
reference voxel coordinates to <em>refspace</em>, if the reference image has a
positive determinant, is <code class="docutils literal"><span class="pre">np.dot(ref_voxtrans,</span> <span class="pre">ref_x_flip)</span></code> - where
<code class="docutils literal"><span class="pre">ref_x_flip</span></code> is the matrix above with <code class="docutils literal"><span class="pre">N_i</span></code> given by the reference
image first axis length.</p>
</dd></dl>

</div>
<div class="section" id="flirt2aff-files">
<h3>flirt2aff_files<a class="headerlink" href="#flirt2aff-files" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.flirt2aff_files">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">flirt2aff_files</code><span class="sig-paren">(</span><em>matfile</em>, <em>in_fname</em>, <em>ref_fname</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.flirt2aff_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Map from <cite>in_fname</cite> image voxels to <cite>ref_fname</cite> voxels given <cite>matfile</cite></p>
<p>See <a class="reference internal" href="#dipy.external.fsl.flirt2aff" title="dipy.external.fsl.flirt2aff"><code class="xref py py-func docutils literal"><span class="pre">flirt2aff()</span></code></a> docstring for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>matfile</strong> : str</p>
<blockquote>
<div><p>filename of output <code class="docutils literal"><span class="pre">-omat</span></code> transformation file from flirt</p>
</div></blockquote>
<p><strong>in_fname</strong> : str</p>
<blockquote>
<div><p>filename for image passed to flirt as <code class="docutils literal"><span class="pre">-in</span></code> image</p>
</div></blockquote>
<p><strong>ref_fname</strong> : str</p>
<blockquote>
<div><p>filename for image passed to flirt as <code class="docutils literal"><span class="pre">-ref</span></code> image</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>aff</strong> : (4,4) array</p>
<blockquote class="last">
<div><p>Transform from voxel coordinates in image for <code class="docutils literal"><span class="pre">in_fname</span></code> to voxel
coordinates in image for <code class="docutils literal"><span class="pre">ref_fname</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="have-flirt">
<h3>have_flirt<a class="headerlink" href="#have-flirt" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.have_flirt">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">have_flirt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.have_flirt" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if we can call flirt without error</p>
<p>Relies on the fact that flirt produces text on stdout when called with no
arguments</p>
</dd></dl>

</div>
<div class="section" id="mc">
<h3>mc<a class="headerlink" href="#mc" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.mc">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">mc</code><span class="sig-paren">(</span><em>input</em>, <em>coordinates</em>, <em>output=None</em>, <em>order=3</em>, <em>mode='constant'</em>, <em>cval=0.0</em>, <em>prefilter=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.mc" title="Permalink to this definition">¶</a></dt>
<dd><p>Map the input array to new coordinates by interpolation.</p>
<p>The array of coordinates is used to find, for each point in the output,
the corresponding coordinates in the input. The value of the input at
those coordinates is determined by spline interpolation of the
requested order.</p>
<p>The shape of the output is derived from that of the coordinate
array by dropping the first axis. The values of the array along
the first axis are the coordinates in the input array at which the
output value is found.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input</strong> : ndarray</p>
<blockquote>
<div><p>The input array.</p>
</div></blockquote>
<p><strong>coordinates</strong> : array_like</p>
<blockquote>
<div><p>The coordinates at which <cite>input</cite> is evaluated.</p>
</div></blockquote>
<p><strong>output</strong> : ndarray or dtype, optional</p>
<blockquote>
<div><p>The array in which to place the output, or the dtype of the returned
array.</p>
</div></blockquote>
<p><strong>order</strong> : int, optional</p>
<blockquote>
<div><p>The order of the spline interpolation, default is 3.
The order has to be in the range 0-5.</p>
</div></blockquote>
<p><strong>mode</strong> : str, optional</p>
<blockquote>
<div><p>Points outside the boundaries of the input are filled according
to the given mode (&#8216;constant&#8217;, &#8216;nearest&#8217;, &#8216;reflect&#8217;, &#8216;mirror&#8217; or &#8216;wrap&#8217;).
Default is &#8216;constant&#8217;.</p>
</div></blockquote>
<p><strong>cval</strong> : scalar, optional</p>
<blockquote>
<div><p>Value used for points outside the boundaries of the input if
<code class="docutils literal"><span class="pre">mode='constant'</span></code>. Default is 0.0</p>
</div></blockquote>
<p><strong>prefilter</strong> : bool, optional</p>
<blockquote>
<div><p>The parameter prefilter determines if the input is pre-filtered with
<cite>spline_filter</cite> before interpolation (necessary for spline
interpolation of order &gt; 1).  If False, it is assumed that the input is
already filtered. Default is True.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>map_coordinates</strong> : ndarray</p>
<blockquote class="last">
<div><p>The result of transforming the input. The shape of the output is
derived from that of <cite>coordinates</cite> by dropping the first axis.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">spline_filter</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">geometric_transform</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">scipy.interpolate</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">ndimage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">12.</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[  0.,   1.,   2.],</span>
<span class="go">       [  3.,   4.,   5.],</span>
<span class="go">       [  6.,   7.,   8.],</span>
<span class="go">       [  9.,  10.,  11.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([ 2.,  7.])</span>
</pre></div>
</div>
<p>Above, the interpolated value of a[0.5, 0.5] gives output[0], while
a[2, 1] is output[1].</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">inds</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cval</span><span class="o">=-</span><span class="mf">33.3</span><span class="p">)</span>
<span class="go">array([  2. , -33.3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">inds</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
<span class="go">array([ 2.,  8.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">inds</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="go">array([ True, False], dtype=bool)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="pipe">
<h3>pipe<a class="headerlink" href="#pipe" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.pipe">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">pipe</code><span class="sig-paren">(</span><em>cmd</em>, <em>print_sto=True</em>, <em>print_ste=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.pipe" title="Permalink to this definition">¶</a></dt>
<dd><p>A tine pipeline system to run external tools.</p>
<p>For more advanced pipelining use nipype <a class="reference external" href="http://www.nipy.org/nipype">http://www.nipy.org/nipype</a></p>
<dl class="docutils">
<dt>cmd <span class="classifier-delimiter">:</span> <span class="classifier">String</span></dt>
<dd>Command line to be run</dd>
<dt>print_sto <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd>Print standard output (stdout) or not (default: True)</dd>
<dt>print_ste <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd>Print standard error (stderr) or not (default: True)</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="pjoin">
<h3>pjoin<a class="headerlink" href="#pjoin" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.pjoin">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">pjoin</code><span class="sig-paren">(</span><em>a</em>, <em>*p</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.pjoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two or more pathname components, inserting &#8216;/&#8217; as needed.
If any component is an absolute path, all previous path components
will be discarded.  An empty last part will result in a path that
ends with a separator.</p>
</dd></dl>

</div>
<div class="section" id="run-flirt-imgs">
<h3>run_flirt_imgs<a class="headerlink" href="#run-flirt-imgs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.run_flirt_imgs">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">run_flirt_imgs</code><span class="sig-paren">(</span><em>in_img</em>, <em>ref_img</em>, <em>dof=6</em>, <em>flags=''</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.run_flirt_imgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Run flirt on nibabel images, returning affine</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>in_img</strong> : <cite>SpatialImage</cite></p>
<blockquote>
<div><p>image to register</p>
</div></blockquote>
<p><strong>ref_img</strong> : <cite>SpatialImage</cite></p>
<blockquote>
<div><p>image to register to</p>
</div></blockquote>
<p><strong>dof</strong> : int, optional</p>
<blockquote>
<div><p>degrees of freedom for registration (default 6)</p>
</div></blockquote>
<p><strong>flags</strong> : str, optional</p>
<blockquote>
<div><p>other flags to pass to flirt command string</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>in_vox2out_vox</strong> : (4,4) ndarray</p>
<blockquote class="last">
<div><p>affine such that, if <code class="docutils literal"><span class="pre">[i,</span> <span class="pre">j,</span> <span class="pre">k]</span></code> is a coordinate in voxels in the
<cite>in_img</cite>, and <code class="docutils literal"><span class="pre">[p,</span> <span class="pre">q,</span> <span class="pre">r]</span></code> are the equivalent voxel coordinates in the
reference image, then
<a href="#id3"><span class="problematic" id="id4">``</span></a>[p, q, r] = np.dot(in_vox2out_vox[:3,:3]),</p>
<blockquote>
<div><p>[i, j, k] + in_vox2out_vox[:3,3])``</p>
</div></blockquote>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="warp-displacements">
<h3>warp_displacements<a class="headerlink" href="#warp-displacements" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.warp_displacements">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">warp_displacements</code><span class="sig-paren">(</span><em>ffa</em>, <em>flaff</em>, <em>fdis</em>, <em>fref</em>, <em>ffaw</em>, <em>order=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.warp_displacements" title="Permalink to this definition">¶</a></dt>
<dd><p>Warp an image using fsl displacements</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ffa</strong> : filename of nifti to be warped</p>
<p><strong>flaff</strong> : filename of .mat  (flirt)</p>
<p><strong>fdis</strong> :  filename of displacements (fnirtfileutils)</p>
<p><strong>fref</strong> : filename of reference volume e.g. (FMRIB58_FA_1mm.nii.gz)</p>
<p class="last"><strong>ffaw</strong> : filename for the output warped image</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="warp-displacements-tracks">
<h3>warp_displacements_tracks<a class="headerlink" href="#warp-displacements-tracks" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.warp_displacements_tracks">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">warp_displacements_tracks</code><span class="sig-paren">(</span><em>fdpy</em>, <em>ffa</em>, <em>fmat</em>, <em>finv</em>, <em>fdis</em>, <em>fdisa</em>, <em>fref</em>, <em>fdpyw</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.warp_displacements_tracks" title="Permalink to this definition">¶</a></dt>
<dd><p>Warp tracks from native space to the FMRIB58/MNI space</p>
<p>We use here the fsl displacements. Have a look at create_displacements to
see an example of how to use these displacements.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fdpy</strong> : filename of the .dpy file with the tractography</p>
<p><strong>ffa</strong> : filename of nifti to be warped</p>
<p><strong>fmat</strong> : filename of .mat  (flirt)</p>
<p><strong>fdis</strong> :  filename of displacements (fnirtfileutils)</p>
<p><strong>fdisa</strong> :  filename of displacements (fnirtfileutils + affine)</p>
<p><strong>finv</strong> : filename of invwarp displacements (invwarp)</p>
<p><strong>fref</strong> : filename of reference volume e.g. (FMRIB58_FA_1mm.nii.gz)</p>
<p class="last"><strong>fdpyw</strong> : filename of the warped tractography</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#dipy.external.fsl.create_displacements" title="dipy.external.fsl.create_displacements"><code class="xref py py-obj docutils literal"><span class="pre">dipy.external.fsl.create_displacements</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="write-bvals-bvecs">
<h3>write_bvals_bvecs<a class="headerlink" href="#write-bvals-bvecs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.external.fsl.write_bvals_bvecs">
<code class="descclassname">dipy.external.fsl.</code><code class="descname">write_bvals_bvecs</code><span class="sig-paren">(</span><em>bvals</em>, <em>bvecs</em>, <em>outpath=None</em>, <em>prefix=''</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.external.fsl.write_bvals_bvecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Write FSL FDT bvals and bvecs files</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>bvals</strong> : (N,) sequence</p>
<blockquote>
<div><p>Vector with diffusion gradient strength (one per diffusion
acquisition, N=no of acquisitions)</p>
</div></blockquote>
<p><strong>bvecs</strong> : (N, 3) array-like</p>
<blockquote>
<div><p>diffusion gradient directions</p>
</div></blockquote>
<p><strong>outpath</strong> : None or str</p>
<blockquote>
<div><p>path to write FDT bvals, bvecs text files
None results in current working directory.</p>
</div></blockquote>
<p><strong>prefix</strong> : str</p>
<blockquote class="last">
<div><p>prefix for bvals, bvecs files in directory.  Defaults to &#8216;&#8217;</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >API Reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2016, dipy developers &lt;neuroimaging@python.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>